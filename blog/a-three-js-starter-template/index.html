<!doctype html>
<html class="position-relative" itemscope itemtype="http://schema.org/WebPage" lang="en"
  data-bs-theme="light" data-palette="blue-gray">
  <head><script src="https://pnichols04.github.io/assets/init/bundle.min.73c0ab8f0bb16929b42cdbc23c8d3158f8bdb8ac11fc41e3000183e0caa73a2d.js" integrity="sha256-c8CrjwuxaSm0LNvCPI0xWPi9uKwR/EHjAAGD4MqnOi0=" crossorigin="anonymous"></script>
<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>A Three.js Starter Template - Philip Nichols</title>
    <link rel="icon" href="https://pnichols04.github.io/favicon_hua60f18f573af22f2d9415dd09fbe0b74_6576_16x16_resize_box_3.png" sizes="16x16" type="image/png">
    <link rel="icon" href="https://pnichols04.github.io/favicon_hua60f18f573af22f2d9415dd09fbe0b74_6576_32x32_resize_box_3.png" sizes="32x32" type="image/png">
    <link rel="apple-touch-icon" href="https://pnichols04.github.io/favicon_hua60f18f573af22f2d9415dd09fbe0b74_6576_180x180_resize_box_3.png" sizes="180x180" type="image/png">
    <link rel="icon" href="https://pnichols04.github.io/favicon_hua60f18f573af22f2d9415dd09fbe0b74_6576_150x150_resize_box_3.png" sizes="150x150" type="image/png">
    <link rel="icon" href="https://pnichols04.github.io/favicon_hua60f18f573af22f2d9415dd09fbe0b74_6576_192x192_resize_box_3.png" sizes="192x192" type="image/png">
<link rel="mask-icon" href="https://pnichols04.github.io/safari-pinned-tab.svg" color="#6f42c1">
<meta name="keywords" content="" />
<meta name="description" content="For Three.js projects on this blog, I’ll be using the template described in this article, and I’ll assume that you are, too.  The template is based on Lewy Blue&rsquo;s excellent online book Discover Three.js." />
    <meta name="robots" content="index, follow" /><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://pnichols04.github.io/blog/a-three-js-starter-template/featured.webp"/>
<meta name="twitter:title" content="A Three.js Starter Template"/>
<meta name="twitter:description" content="For Three.js projects on this blog, I’ll be using the template described in this article, and I’ll assume that you are, too.  The template is based on Lewy Blue&rsquo;s excellent online book Discover Three.js."/>
<meta name="twitter:site" content="@PhilipNichols04"/>
<meta property="og:title" content="A Three.js Starter Template" />
<meta property="og:description" content="For Three.js projects on this blog, I’ll be using the template described in this article, and I’ll assume that you are, too.  The template is based on Lewy Blue&rsquo;s excellent online book Discover Three.js." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://pnichols04.github.io/blog/a-three-js-starter-template/" /><meta property="og:image" content="https://pnichols04.github.io/blog/a-three-js-starter-template/featured.webp"/><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2022-08-29T00:00:00-04:00" />
<meta property="article:modified_time" content="2022-08-29T00:00:00-04:00" />

<meta itemprop="name" content="A Three.js Starter Template">
<meta itemprop="description" content="For Three.js projects on this blog, I’ll be using the template described in this article, and I’ll assume that you are, too.  The template is based on Lewy Blue&rsquo;s excellent online book Discover Three.js."><meta itemprop="datePublished" content="2022-08-29T00:00:00-04:00" />
<meta itemprop="dateModified" content="2022-08-29T00:00:00-04:00" />
<meta itemprop="wordCount" content="2988"><meta itemprop="image" content="https://pnichols04.github.io/blog/a-three-js-starter-template/featured.webp">
<meta itemprop="keywords" content="Three.js,JavaScript,Template," />
  <link rel="manifest" href="https://pnichols04.github.io/manifest.json">

<link data-precache rel="stylesheet" href="https://pnichols04.github.io/assets/main/bundle.min.3c0a12d1c2431f53e3c09396ef6587e6c661c959093274b5a3cb1b5ffa9485d2.css" integrity="sha256-PAoS0cJDH1PjwJOW72WH5sZhyVkJMnS1o8sbX/qUhdI=" crossorigin="anonymous">

    <link data-precache rel="stylesheet" href="https://pnichols04.github.io/assets/viewer/bundle.min.6d0fc65b8b058ac563091dc5c36f61afba5dd705058680aa24f1d5a3bcf0064d.css" integrity="sha256-bQ/GW4sFisVjCR3Fw29hr7pd1wUFhoCqJPHVo7zwBk0=" crossorigin="anonymous">
</head>
  <body><header>
  
<nav class="top-app-bar shadow navbar navbar-expand-lg fixed-top">
  <div class="container">
<a class="navbar-brand d-flex align-items-center flex-grow-1 flex-lg-grow-0 text-lg-start ms-2 ms-lg-0 mx-auto me-lg-2" href="https://pnichols04.github.io/">
    <picture><img class="logo " alt="Logo" src="https://pnichols04.github.io/images/folded-en-logo.webp" loading="lazy" width="256" height="256" />
</picture>Philip Nichols
</a>
    <button class="navbar-toggler order-5" type="button" data-bs-toggle="offcanvas" data-bs-target="#navbarMenus"
      aria-controls="navbarMenus" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-ellipsis-h"></i>
    </button>
    <div class="offcanvas-lg offcanvas-end flex-grow-1" data-bs-scroll="true" tabindex="-1" id="navbarMenus" aria-labelledby="navbarMenusLabel">
      <div class="offcanvas-header px-4 pb-0">
        <h5 class="offcanvas-title" id="navbarMenusLabel">Philip Nichols</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" data-bs-target="#navbarMenus" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body p-4 pt-0 p-lg-0">
        <hr class="d-lg-none">
        <ul class="navbar-nav flex-row flex-wrap align-items-center me-auto"><li class="nav-item col-6 col-lg-auto">
            <a class="nav-link py-2 px-0 px-lg-2" href="https://pnichols04.github.io/">
              <i class="fas fa-home"></i>&nbsp;Home
            </a>
          </li><li class="nav-item col-6 col-lg-auto">
            <a class="nav-link py-2 px-0 px-lg-2" href="https://pnichols04.github.io/about/">
              <i class="fas fa-user"></i>&nbsp;About
            </a>
          </li>
          <li class="nav-item col-6 col-lg-auto dropdown py-2 px-0 px-lg-2">
            <a class="dropdown-toggle" href="#" class="nav-link"
              id="navbarDropdownBlog" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Blog
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownBlog" data-bs-popper="none">
              <li>
                <a class="dropdown-item text-wrap text-lg-nowrap"
                  href="https://pnichols04.github.io/archives/">
                  <i class="fas fa-fw fa-file-archive"></i>Archives
                </a>
              </li>
              <li>
                <a class="dropdown-item text-wrap text-lg-nowrap"
                  href="https://pnichols04.github.io/series/">
                  <i class="fas fa-fw fa-columns"></i>Series
                </a>
              </li>
              <li>
                <a class="dropdown-item text-wrap text-lg-nowrap"
                  href="https://pnichols04.github.io/categories/">
                  <i class="fas fa-fw fa-folder"></i>Categories
                </a>
              </li>
              <li>
                <a class="dropdown-item text-wrap text-lg-nowrap"
                  href="https://pnichols04.github.io/tags/">
                  <i class="fas fa-fw fa-tags"></i>Tags
                </a>
              </li>
            </ul>
          </li>
        </ul>
        <hr class="d-lg-none">
  <form class="search-bar ms-auto my-1" action="https://pnichols04.github.io/search/" novalidate>
    <div class="input-group input-group-sm align-items-center">
      <span class="btn btn-search disabled position-absolute left-0 border-0">
        <i class="fas fa-fw fa-search fa-lg"></i>
      </span>
      <input class="py-2 form-control rounded search-input" name="q" type="search" aria-label="Search" required>
    </div>
  </form><hr class="d-lg-none">
        <ul class="navbar-nav flex-row flex-wrap align-items-center ms-md-auto">
<li class="nav-item py-2 py-lg-1 col-12 col-lg-auto">
<nav class="social-links nav justify-content-center flex-row">
      <a class="nav-link social-link col-6 col-lg-auto p-1" target="_blank" href="https://github.com/pnichols04" title="GitHub" rel="noopener noreferrer">
        <i class="fa-fw fab fa-github"></i>
        <span class="ms-1 d-lg-none">GitHub</span>
      </a>
      <a class="nav-link social-link col-6 col-lg-auto p-1" target="_blank" href="https://www.patreon.com/nicholsphilip" title="Patreon" rel="noopener noreferrer">
        <i class="fa-fw fab fa-patreon"></i>
        <span class="ms-1 d-lg-none">Patreon</span>
      </a>
      <a class="nav-link social-link col-6 col-lg-auto p-1" target="_blank" href="https://www.paypal.com/paypalme/philipnichols1856" title="Paypal" rel="noopener noreferrer">
        <i class="fa-fw fab fa-paypal"></i>
        <span class="ms-1 d-lg-none">Paypal</span>
      </a>
  <a class="nav-link social-link col-6 col-lg-auto p-1" target="_blank" href="https://pnichols04.github.io/index.xml" title="RSS" rel="noopener noreferrer">
    <i class="fas fa-fw fa-rss"></i>
    <span class="ms-1 d-lg-none">RSS</span>
  </a>
</nav>

</li>
<li class="nav-item py-2 py-lg-1 col-12 col-lg-auto">
  <div class="vr d-none d-lg-flex h-100 mx-lg-2 text-white"></div>
  <hr class="d-lg-none my-2">
</li>
<li class="nav-item dropdown py-1 py-lg-1 col-6 col-lg-auto">
    <a class="nav-link px-0 px-lg-1" href="#" id="languageDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="fas fa-fw fa-globe"></i>
        <span class="d-lg-none">Language</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="languageDropdown">
        <li>
        <a class="dropdown-item active" href="https://pnichols04.github.io/">
            English
        </a>
        </li>
        <li>
        <a class="dropdown-item" href="https://pnichols04.github.io/zh-cn/">
            
        </a>
        </li></ul>
</li>
<li class="nav-item py-1 col-12 col-lg-auto">
  <div class="vr d-none d-lg-flex h-100 mx-lg-2 text-white"></div>
  <hr class="d-lg-none my-2">
</li>
<li class="nav-item dropdown col-6 col-lg-auto">
    <a class="nav-link px-0 py-2 px-lg-1" href="#" id="fontSizeDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="fas fa-fw fa-font"></i>
        <span class="d-lg-none">Font Size</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="fontSizeDropdown">
        <li>
            <button class="font-size-item dropdown-item" data-size="xs">
                Extra Small
            </button>
        </li>
        <li>
            <button class="font-size-item dropdown-item" data-size="sm">
                Small
            </button>
        </li>
        <li>
            <button class="font-size-item dropdown-item active" data-size="md">
                Medium
            </button>
        </li>
        <li>
            <button class="font-size-item dropdown-item" data-size="lg">
                Large
            </button>
        </li>
        <li>
            <button class="font-size-item dropdown-item" data-size="xl">
                Extra Large
            </button>
        </li>
    </ul>
</li>
<li class="nav-item dropdown col-6 col-lg-auto">
    <a class="nav-link px-0 py-2 px-lg-1" href="#" id="modeDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="mode-icon fas fa-fw fa-sun" id="modeIcon"></i>
        <span class="d-lg-none">Mode</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="modeDropdown">
        <li class="mode-item active" data-color-mode="light" data-icon="sun">
            <button class="dropdown-item">
                <i class="mode-icon fas fa-fw fa-sun"></i> Light
            </button>
        </li>
        <li class="mode-item" data-color-mode="dark" data-icon="moon">
            <button class="dropdown-item">
                <i class="mode-icon fas fa-fw fa-moon"></i> Dark
            </button>
        </li>
        <li class="mode-item" data-color-mode="auto" data-icon="adjust">
            <button class="dropdown-item">
                <i class="mode-icon fas fa-fw fa-adjust"></i> Auto
            </button>
        </li>
    </ul>
</li>
        </ul>
      </div>
    </div>
  </div>
</nav>

</header>

    <main class="container">
      <div class="row content"><noscript>
    <div class="alert alert-danger" role="alert">Your browser does not support JavaScript.</div>
</noscript>
<aside class="col-lg-4 sidebar d-flex order-lg-5">
  <div class="container d-flex flex-column">
    
    <div class="accordion profile">
  <div class="accordion-item card row text-center component">
    <div class="accordion-header card-header border-0" id="profile-header">
      <a class="accordion-button d-lg-none mb-2 collapsed shadow-none p-0 bg-transparent text-surface" type="button" data-bs-toggle="collapse" data-bs-target="#profile" aria-expanded="false" aria-controls="profile">
        Profile
      </a>
    </div>
    <div class="card-body collapse accordion-collapse accordion-body d-lg-block" id="profile" aria-labelledby="profile-header">
      <div class="col-12 d-flex align-items-center justify-content-center"><picture><img class="profile-avatar rounded-circle " alt="Philip Nichols" src="https://pnichols04.github.io/images/pjn-avatar.jpg" loading="lazy" data-viewer-invisible width="800" height="800" />
</picture></div>
      <div class="col-12 profile-meta"><div class="profile-name fw-fold fs-lg">Philip Nichols</div><div class="profile-bio">Freelance developer who’s been around for everything from dancing babies and blinking marquees to 3D and machine learning</div><div class="profile-location"><i class="fas fa-fw fa-map-marker-alt"></i>Attleboro, MA, USA</div><div class="profile-about text-primary"><i class="fas fa-fw fa-user"></i><a href="https://pnichols04.github.io/about/">About</a></div><div class="profile-contact text-primary"><i class="fas fa-fw fa-question-circle"></i><a href="https://pnichols04.github.io/contact/">Contact Me</a></div></div>
<nav class="social-links nav justify-content-center mt-1 justify-content-around">
    <a class="nav-link social-link" href="mailto:philip.j.nichols@gmail.com" title="Email">
      <i class="fas fa-fw fa-2x fa-envelope"></i>
    </a>
      <a class="nav-link social-link" target="_blank" href="https://github.com/pnichols04" title="GitHub" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-github"></i>
      </a>
      <a class="nav-link social-link" target="_blank" href="https://www.patreon.com/nicholsphilip" title="Patreon" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-patreon"></i>
      </a>
      <a class="nav-link social-link" target="_blank" href="https://www.paypal.com/paypalme/philipnichols1856" title="Paypal" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-paypal"></i>
      </a>
      <a class="nav-link social-link" target="_blank" href="https://twitter.com/PhilipNichols04" title="Twitter" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-twitter"></i>
      </a>
</nav>
</div>
  </div>
</div>


<div class="accordion taxonomies-toggle">
    <section class="row card component accordion-item">
        <div class="accordion-header card-header border-0">
            <a class="accordion-button d-lg-none mb-1 collapsed shadow-none p-0 bg-transparent" type="button" data-bs-toggle="collapse" data-bs-target="#taxonomies-toggle" aria-expanded="false" aria-controls="taxonomies-toggle">
                Taxonomies
            </a>
        </div>
        <div class="card-body collapse accordion-collapse accordion-body d-lg-block" id="taxonomies-toggle">
            <ul class="nav nav-pills nav-fill" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="taxonomyCategoriesTab" data-bs-toggle="tab" data-bs-target="#taxonomyCategories" 
                            type="button" role="tab" aria-controls="Categories" aria-selected="true">
                            Categories
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="taxonomyTagsTab" data-bs-toggle="tab" data-bs-target="#taxonomyTags" 
                            type="button" role="tab" aria-controls="Tags" aria-selected="true">
                            Tags
                        </button>
                    </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="taxonomyArchivesTab" data-bs-toggle="tab" data-bs-target="#taxonomyArchive" 
                        type="button" role="tab" aria-controls="taxonomyArchives" aria-selected="true">
                        Archives
                    </button>
                </li>
            </ul>
            
            <div class="tab-content mt-3">
                    <div class="tab-pane active" id="taxonomyCategories" role="tabpanel" aria-labelledby="taxonomyCategoriesTab" tabindex="0">
                        <a href="https://pnichols04.github.io/categories/three.js/" class="btn btn-sm btn-secondary post-taxonomy ps-3 post-category me-2 mb-2" title="Three.js">
                            Three.js
                            <span class="badge badge-sm text-secondary bg-white ms-1">1</span>
                        </a>
                    </div>
                    <div class="tab-pane" id="taxonomyTags" role="tabpanel" aria-labelledby="taxonomyTagsTab" tabindex="0">
                        <a href="https://pnichols04.github.io/tags/javascript/" class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title="JavaScript">
                            JavaScript
                            <span class="badge badge-sm text-secondary bg-white ms-1">1</span>
                        </a>
                        <a href="https://pnichols04.github.io/tags/template/" class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title="Template">
                            Template
                            <span class="badge badge-sm text-secondary bg-white ms-1">1</span>
                        </a>
                        <a href="https://pnichols04.github.io/tags/three.js/" class="btn btn-sm btn-secondary post-taxonomy ps-3 post-tag me-2 mb-2" title="Three.js">
                            Three.js
                            <span class="badge badge-sm text-secondary bg-white ms-1">1</span>
                        </a>
                    </div>
                <div class="tab-pane" id="taxonomyArchive" role="tabpanel" aria-labelledby="taxonomyArchiveTab" tabindex="0">

    <a href="https://pnichols04.github.io/archives/2022/" class="btn btn-sm btn-secondary post-taxonomy ps-3 me-2 mb-2" title="2022">
    2022 <span class="badge badge-sm text-secondary bg-white ms-1">1</span>
    </a>


                </div>
            </div>
        </div>
    </section>
</div>
<div class="accordion posts-toggle">
    <section class="row card component accordion-item">
        <div class="accordion-header card-header border-0">
            <a class="accordion-button d-lg-none mb-1 collapsed shadow-none p-0 bg-transparent" type="button" data-bs-toggle="collapse" data-bs-target="#posts-toggle" aria-expanded="false" aria-controls="posts-toggle">
                Posts
            </a>
        </div>
        <div class="card-body collapse accordion-collapse accordion-body d-lg-block" id="posts-toggle">
            <ul class="nav nav-pills nav-fill" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="recent-posts-tab" data-bs-toggle="tab" data-bs-target="#recent-posts" 
                        type="button" role="tab" aria-controls="recent-posts" aria-selected="true">
                        Recent Posts
                    </button>
                </li>
            </ul>
            
            <div class="tab-content mt-3">
                <div class="tab-pane active" id="recent-posts" role="tabpanel" aria-labelledby="recent-posts-tab" tabindex="0">
                    <ul class="post-list list-unstyled ms-1">
                    <li class="mb-2">
    <div class="d-flex">
        <div class="flex-shrink-0 d-flex justify-content-center align-items-center" style="max-width: 100px"><picture>
    <source srcset="https://pnichols04.github.io/blog/a-three-js-starter-template/featured_hu3527133e4caf184d3ad073c53c448f19_12406_500x0_resize_q75_h2_box_2.webp" media="(max-width: 576px)" height="281" width="500">
    <img class="img-fluid" height="101" width="180" alt="featured.webp" src="https://pnichols04.github.io/blog/a-three-js-starter-template/featured_hu3527133e4caf184d3ad073c53c448f19_12406_180x0_resize_q75_h2_box_2.webp" data-src="https://pnichols04.github.io/blog/a-three-js-starter-template/featured.webp" loading="lazy"/>
  </picture>
        </div>
        <div class="flex-grow-1 d-flex flex-column h-auto justify-content-center ms-3">
            <a class="post-title" href="https://pnichols04.github.io/blog/a-three-js-starter-template/">A Three.js Starter Template</a>
            <div class="post-meta mt-2">
                <span class="post-date">August 29, 2022</span>
            </div>
        </div>
    </div>
                    </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
</div>
<div class="accordion post-toc">
  <div class="accordion-item row mb-4 card component" id="postTOC">
    <div class="card-header accordion-header">
      <h2 class="card-title fs-4 my-2 text-surface d-none d-lg-block">Contents</h2>
      <a class="accordion-button d-lg-none mb-1 collapsed shadow-none p-0 bg-transparent" type="button" data-bs-toggle="collapse" data-bs-target="#post-toc" aria-expanded="false" aria-controls="post-toc">
        Contents
      </a>
    </div>
    <div class="card-body collapse accordion-collapse accordion-body d-lg-block" id="post-toc" aria-labelledby="post-toc-header">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#quick-start">Quick Start</a></li>
    <li><a href="#project-structure">Project Structure</a></li>
    <li><a href="#markup-and-stylesheet">Markup and Stylesheet</a></li>
    <li><a href="#the-javascript-entry-point">The JavaScript Entry Point</a></li>
    <li><a href="#world">World</a></li>
    <li><a href="#systems">Systems</a>
      <ul>
        <li><a href="#renderer">Renderer</a></li>
        <li><a href="#resizer">Resizer</a></li>
        <li><a href="#animation-loop">Animation Loop</a></li>
        <li><a href="#performance-counter">Performance Counter</a></li>
        <li><a href="#graphical-user-interface">Graphical User Interface</a></li>
      </ul>
    </li>
    <li><a href="#components">Components</a>
      <ul>
        <li><a href="#scene">Scene</a></li>
        <li><a href="#lights">Lights</a></li>
        <li><a href="#camera">Camera</a></li>
        <li><a href="#cube">Cube</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
  </div>
</div>





    
  </div>
</aside>
<div class="col-lg-8">
  <div class="container"><nav class="row card component" aria-label="breadcrumb">
  <div class="card-body pb-0">
    <ol class="breadcrumb"><li class="breadcrumb-item text-surface"><a href="https://pnichols04.github.io/">Home</a></li><li class="breadcrumb-item text-surface"><a href="https://pnichols04.github.io/blog/">Blogs</a></li><li class="breadcrumb-item active">A Three.js Starter Template</li></ol>
  </div>
</nav><div class="post-panel-wrapper position-sticky">
  <div class="d-flex flex-column component rounded post-panel position-absolute border">
    
    <a class="action action-panel-toggler" role="button" title="Panel toggler">
      <i class="fas fa-fw fa-chevron-circle-down"></i>
    </a>
    <a id="sidebarToggler" class="action d-none d-lg-block" role="button" title="Sidebar toggler">
  <i class="fas fa-fw fa-expand-alt" data-fa-transform="rotate-45"></i>
</a>

    

    <a class="action btn-reward" role="button" data-bs-toggle="modal" data-bs-target="#rewardModal" title="Buy me a coffee">
  <i class="fas fa-fw fa-coffee"></i>
</a>
    <a class="action" href="#post-copyright" role="button" aria-label="Copyright" title="Copyright">
  <i class="fas fa-fw fa-copyright"></i>
</a>
    <a class="action" href="#post-comments" role="button" aria-label="Comments" title="Comments">
  <i class="fas fa-fw fa-comments"></i>
</a>
    <a class="action" href="#postTOC" aria-controls="Table of contents" role="button" title="Table of contents">
  <i class="fas fa-fw fa-list-alt"></i>
</a>
    
  </div>
</div><article class="row card component mb-4 post">
  <div class="card-header ">
    <h1 class="card-title post-title my-2">A Three.js Starter Template</h1>
  </div>
  <div class="card-body"><div class="post-meta mb-3">
  <span class="post-date me-1 mb-1" title="created on 2022-08-29 00:00:00 -0400 EDT.">August 29, 2022</span><span class="post-reading-time me-1 mb-1">15 min read</span><a href="https://pnichols04.github.io/categories/three.js/" class="btn btn-sm btn-secondary mb-1 me-2 py-0 pe-1 post-taxonomy post-category">
      <i class="fas fa-fw fa-folder me-1"></i>Three.js</a><a href="https://pnichols04.github.io/tags/javascript/" class="btn btn-sm btn-secondary mb-1 me-2 py-0 pe-1 post-taxonomy post-tag">JavaScript</a><a href="https://pnichols04.github.io/tags/template/" class="btn btn-sm btn-secondary mb-1 me-2 py-0 pe-1 post-taxonomy post-tag">Template</a><a href="https://pnichols04.github.io/tags/three.js/" class="btn btn-sm btn-secondary mb-1 me-2 py-0 pe-1 post-taxonomy post-tag">Three.js</a>
</div>
<picture><source srcset="https://pnichols04.github.io/blog/a-three-js-starter-template/featured_hu3527133e4caf184d3ad073c53c448f19_12406_0x270_resize_q75_h2_box_2.webp" type="image/webp" media="(max-width: 576px)" width="480" height="270">
      <img class="post-featured-img w-100 mb-3" alt="featured.webp" src="https://pnichols04.github.io/blog/a-three-js-starter-template/featured_hu3527133e4caf184d3ad073c53c448f19_12406_0x480_resize_q75_h2_box_2.webp" width="853" height="480" data-src="https://pnichols04.github.io/blog/a-three-js-starter-template/featured.webp"/>
    </picture><div class="post-content mb-3" data-bs-spy="scroll" data-bs-target="#TableOfContents" tabindex="0"><p>For <a href="https://threejs.org" target="_blank" rel="noopener noreferrer">Three.js<i class="fas fa-external-link-square-alt ms-1"></i></a> projects on this blog, I’ll be using the template described in this article, and I’ll assume that you are, too.  The template is based on Lewy Blue&rsquo;s excellent online book <a href="https://discoverthreejs.com/" target="_blank" rel="noopener noreferrer"><em>Discover Three.js</em><i class="fas fa-external-link-square-alt ms-1"></i></a>.</p>
<p>I don’t intend to repeat that book here, but rather only to provide a high-level description of its approach to building a Three.js app, along with my own additions.  You should refer to that book if you find the detail here is lacking, or if you need a more basic introduction to Three.js than I provide here.  I have endeavored to make the code as self-documenting as possible, but some familiarity with Three.js will be assumed.</p>
<p>The motivation of this starter template is to modularize the Three.js app, imposing a degree of the single-responsibility and encapsulation principles that characterize object-oriented programming.  The goal is to have a more navigable, manageable, and extensible project than is typically found in single-file Three.js examples.  Of necessity, even a basic 3D scene requires a number of components, and attempting to realize one in a single file quickly becomes unwieldy.</p>
<h2 id="quick-start" data-numberify>Quick Start<a class="anchor ms-1 d-none" href="#quick-start">#</a></h2>
<p>In case you don’t want or need the description of the template that follows, I’ve made the template available as a <a href="https://github.com/pnichols04/three-js-starter-template" target="_blank" rel="noopener noreferrer">GitHub repository<i class="fas fa-external-link-square-alt ms-1"></i></a> that you can clone or fork.  You can also open the template on <a href="https://codesandbox.io/s/three-js-starter-template-pwhjpk" target="_blank" rel="noopener noreferrer">CodeSandbox<i class="fas fa-external-link-square-alt ms-1"></i></a> and begin using it immediately.</p>
<iframe src="https://codesandbox.io/embed/three-js-starter-template-pwhjpk?fontsize=14&hidenavigation=1&theme=dark"
     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
     title="three-js-starter-template"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>
<h2 id="project-structure" data-numberify>Project Structure<a class="anchor ms-1 d-none" href="#project-structure">#</a></h2>
<p>The folder and file structure of the project is as follows.</p>
<div class="card">
  <div class="card-body">
    <div class="clt">
      <ul class="folder-tree">
        <li>
          <i class="far fa-folder-open"></i>&nbsp;(project root)
          <ul>
            <li>
              <i class="far fa-folder"></i>&nbsp;<span class="text-muted">assets</span>
            </li>
            <li>
              <i class="far fa-folder-open"></i>&nbsp;scripts
              <ul>
                <li>
                  <i class="far fa-folder-open"></i>&nbsp;world
                  <ul>
                    <li>
                      <i class="far fa-folder-open"></i>&nbsp;components
                      <ul>
                        <li>
                          <a href="#camera">
                            <i class="fab fa-js-square"></i>&nbsp;camera.js</a>
                        </li>
                        <li>
                          <a href="#cube"><i class="fab fa-js-square"></i>&nbsp;cube.js
                        </li></a>
                        <li>
                          <a href="#lights">
                            <i class="fab fa-js-square"></i>&nbsp;lights.js</a>
                        </li>
                        <li>
                          <a href="#scene">
                            <i class="fab fa-js-square"></i>&nbsp;scene.js</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <i class="far fa-folder-open"></i>&nbsp;systems
                      <ul>
                        <li>
                          <a href="#graphical-user-interface">
                            <i class="fab fa-js-square"></i>&nbsp;gui.js</a>
                        </li>
                        <li>
                          <a href="#animation-loop">
                            <i class="fab fa-js-square"></i>&nbsp;loop.js</a>
                        </li>
                        <li>
                          <a href="#renderer">
                            <i class="fab fa-js-square"></i>&nbsp;renderer.js</a>
                        </li>
                        <li>
                          <a href="#resizer">
                            <i class="fab fa-js-square"></i>&nbsp;resizer.js</a>
                        </li>
                        <li>
                          <a href="#performance-counter">
                            <i class="fab fa-js-square"></i>&nbsp;stats.js</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="#world">
                        <i class="fab fa-js-square"></i>&nbsp;world.js</a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="#the-javascript-entry-point">
                    <i class="fab fa-js-square"></i>&nbsp;main.js</a>
                </li>
              </ul>
            </li>
            <li>
              <i class="far fa-folder-open"></i>&nbsp;styles
              <ul>
                <li><a href="#markup-and-stylesheet">
                    <i class="fab fa-css3-alt"></i>&nbsp;main.css</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="#markup-and-stylesheet">
            <i class="fab fa-html5"></i>&nbsp;index.html</a>
        </li>
      </ul>
    </div>
  </div>
</div>
<h2 id="markup-and-stylesheet" data-numberify>Markup and Stylesheet<a class="anchor ms-1 d-none" href="#markup-and-stylesheet">#</a></h2>
<p><code>index.html</code> simply establishes a container for the 3D world, <code>div#scene-container</code>, and the necessary imports for the scripts and styles.  Three.js itself is loaded from a CDN.</p>
<p>Three.js and our own script are loaded as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" target="_blank" rel="noopener noreferrer">JavaScript modules<i class="fas fa-external-link-square-alt ms-1"></i></a>.  Current versions of all the major browsers support JavaScript modules, making this appropriate for a development environment, but transpiling and bundling the scripts with <a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">WebPack<i class="fas fa-external-link-square-alt ms-1"></i></a>, <a href="https://parceljs.org/" target="_blank" rel="noopener noreferrer">Parcel<i class="fas fa-external-link-square-alt ms-1"></i></a>, or a similar tool may be desirable in production.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Three.js Starter Template by Philip Nichols<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;./styles/main.css&#34;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;stylesheet&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/css&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">      <span class="na">async</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">      <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js&#34;</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">    <span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;importmap&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">        <span class="s2">&#34;imports&#34;</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">          <span class="s2">&#34;three&#34;</span><span class="o">:</span> <span class="s2">&#34;https://unpkg.com/three@0.143.0/build/three.module.js&#34;</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;module&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;./src/main.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">
</span></span><span class="line"><span class="ln">21</span><span class="cl">  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;scene-container&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></span></span></code></pre></div>
<p><code>main.css</code> styles the document body and scene container to occupy the full width and height of the browser window.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="nt">body</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">  <span class="c">/* remove margins and scroll bars */</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">  <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">  <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">  <span class="c">/* style text */</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">  <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">  <span class="k">font-family</span><span class="p">:</span> <span class="n">Sans-Serif</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">
</span></span><span class="line"><span class="ln">11</span><span class="cl">  <span class="c">/* color text */</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">  <span class="k">color</span><span class="p">:</span> <span class="mh">#444</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">
</span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="nt">h1</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">  <span class="c">/* position the heading */</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">  <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">
</span></span><span class="line"><span class="ln">20</span><span class="cl">  <span class="c">/* make sure that the heading is drawn on top */</span>
</span></span><span class="line"><span class="ln">21</span><span class="cl">  <span class="k">z-index</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">
</span></span><span class="line"><span class="ln">24</span><span class="cl"><span class="p">#</span><span class="nn">scene-container</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">25</span><span class="cl">  <span class="c">/* tell our scene container to take up the full page */</span>
</span></span><span class="line"><span class="ln">26</span><span class="cl">  <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">27</span><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">28</span><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">29</span><span class="cl">
</span></span><span class="line"><span class="ln">30</span><span class="cl">  <span class="c">/*
</span></span></span><span class="line"><span class="ln">31</span><span class="cl"><span class="c">    TODO: Set the container&#39;s background color to the same as the scene&#39;s
</span></span></span><span class="line"><span class="ln">32</span><span class="cl"><span class="c">    background to prevent flashing on load
</span></span></span><span class="line"><span class="ln">33</span><span class="cl"><span class="c">  */</span>
</span></span><span class="line"><span class="ln">34</span><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="kc">skyblue</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">35</span><span class="cl"><span class="p">}</span></span></span></code></pre></div>
<p>For more information, see <em>Discover Three.js</em> at Appendix A.1, &ldquo;<a href="https://discoverthreejs.com/book/appendix/html-and-css-reference/" target="_blank" rel="noopener noreferrer">HTML and CSS Used in This Book<i class="fas fa-external-link-square-alt ms-1"></i></a>.&rdquo;</p>
<h2 id="the-javascript-entry-point" data-numberify>The JavaScript Entry Point<a class="anchor ms-1 d-none" href="#the-javascript-entry-point">#</a></h2>
<p><code>main.js</code> is the entry point for our app.  Its principal job is to bootstrap an object of class <code>World</code>, which is where the central logic running our 3D world will reside.  While <code>main.js</code> and its <code>main()</code> function have a limited role, their isolation from the <code>World</code> object ensures a separation of concerns; <code>main.js</code> knows about the DOM but not the internals of the 3D world, while the opposite is (mostly) true of <code>World</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">World</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./world/world.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="cm">/** Bootstraps a Three.js app */</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="kr">async</span> <span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">  <span class="c1">// Get a reference to the canvas element
</span></span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span> <span class="s2">&#34;#scene-container&#34;</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">  <span class="c1">// Create an instance of the World app
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">world</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">World</span><span class="p">(</span> <span class="nx">container</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">
</span></span><span class="line"><span class="ln">12</span><span class="cl">  <span class="c1">// Perform any asynchronous initialization
</span></span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="c1"></span>  <span class="kr">await</span> <span class="nx">world</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">
</span></span><span class="line"><span class="ln">15</span><span class="cl">  <span class="c1">// Start the animation loop
</span></span></span><span class="line"><span class="ln">16</span><span class="cl"><span class="c1"></span>  <span class="nx">world</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">
</span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">
</span></span><span class="line"><span class="ln">20</span><span class="cl"><span class="c1">// Start the app
</span></span></span><span class="line"><span class="ln">21</span><span class="cl"><span class="c1"></span><span class="nx">main</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span> <span class="p">(</span> <span class="nx">err</span> <span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl">
</span></span><span class="line"><span class="ln">23</span><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">err</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl">
</span></span><span class="line"><span class="ln">25</span><span class="cl"><span class="p">}</span> <span class="p">);</span></span></span></code></pre></div>
<p>The <code>main()</code> function is marked <code>async</code>, even though no asynchronous functionality is currently leveraged.  Nonetheless, supporting asynchrony by default will be useful when we are loading models and textures, because Three.js’s file loaders generally run asynchronously.</p>
<p>For more information, see <em>Discover Three.js</em> at Chapter 1.3, “<a href="https://discoverthreejs.com/book/first-steps/world-app/" target="_blank" rel="noopener noreferrer">Introducing the World App<i class="fas fa-external-link-square-alt ms-1"></i></a>.”</p>
<h2 id="world" data-numberify>World<a class="anchor ms-1 d-none" href="#world">#</a></h2>
<p>An object of the <code>World</code> class defined in <code>/src/world/world.js</code> is principally a composition container for the components and systems that represent individual elements and behaviors of the 3D world.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createCamera</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./components/camera.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createLights</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./components/lights.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createScene</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./components/scene.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createCube</span><span class="p">,</span> <span class="nx">createCubeGui</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./components/cube.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">
</span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createRenderer</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./systems/renderer.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createStats</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./systems/stats.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createGui</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./systems/gui.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Resizer</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./systems/resizer.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Loop</span><span class="p">,</span> <span class="nx">createLoopGui</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./systems/loop.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">
</span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="cm">/** @type {import(&#34;three&#34;).PerspectiveCamera} */</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="kd">let</span> <span class="nx">camera</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="cm">/** @type {import(&#34;three&#34;).Scene} */</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="kd">let</span> <span class="nx">scene</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl"><span class="cm">/** @type {import(&#34;three&#34;).WebGLRenderer} */</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl"><span class="kd">let</span> <span class="nx">renderer</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="cm">/** @type {import(&#34;./systems/loop.js&#34;).Loop} */</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl"><span class="kd">let</span> <span class="nx">loop</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">
</span></span><span class="line"><span class="ln">21</span><span class="cl"><span class="cm">/** Composes the objects that participate in a Three.js app */</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl"><span class="kr">class</span> <span class="nx">World</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">
</span></span><span class="line"><span class="ln">24</span><span class="cl">  <span class="cm">/**
</span></span></span><span class="line"><span class="ln">25</span><span class="cl"><span class="cm">   * Initializes a new instance of the World class
</span></span></span><span class="line"><span class="ln">26</span><span class="cl"><span class="cm">   * @param {Element} container The DOM element into which
</span></span></span><span class="line"><span class="ln">27</span><span class="cl"><span class="cm">   * the rendering canvas should be injected
</span></span></span><span class="line"><span class="ln">28</span><span class="cl"><span class="cm">   */</span>
</span></span><span class="line"><span class="ln">29</span><span class="cl">  <span class="nx">constructor</span><span class="p">(</span> <span class="nx">container</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">30</span><span class="cl">
</span></span><span class="line"><span class="ln">31</span><span class="cl">    <span class="nx">camera</span> <span class="o">=</span> <span class="nx">createCamera</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">32</span><span class="cl">    <span class="nx">scene</span> <span class="o">=</span> <span class="nx">createScene</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">33</span><span class="cl">    <span class="nx">renderer</span> <span class="o">=</span> <span class="nx">createRenderer</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">34</span><span class="cl">    <span class="nx">loop</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Loop</span><span class="p">(</span> <span class="nx">camera</span><span class="p">,</span> <span class="nx">scene</span><span class="p">,</span> <span class="nx">renderer</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">35</span><span class="cl">
</span></span><span class="line"><span class="ln">36</span><span class="cl">    <span class="kr">const</span> <span class="nx">resizer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Resizer</span><span class="p">(</span> <span class="nx">container</span><span class="p">,</span> <span class="nx">camera</span><span class="p">,</span> <span class="nx">renderer</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">37</span><span class="cl">    <span class="kr">const</span> <span class="nx">stats</span> <span class="o">=</span> <span class="nx">createStats</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">38</span><span class="cl">    <span class="kr">const</span> <span class="nx">gui</span> <span class="o">=</span> <span class="nx">createGui</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">39</span><span class="cl">
</span></span><span class="line"><span class="ln">40</span><span class="cl">    <span class="nx">container</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span> <span class="nx">renderer</span><span class="p">.</span><span class="nx">domElement</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">41</span><span class="cl">    <span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">domElement</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">42</span><span class="cl">    <span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">dom</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">43</span><span class="cl">
</span></span><span class="line"><span class="ln">44</span><span class="cl">    <span class="kr">const</span> <span class="p">[</span> <span class="nx">mainLight</span><span class="p">,</span> <span class="nx">ambientLight</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">createLights</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">45</span><span class="cl">    <span class="kr">const</span> <span class="nx">cube</span> <span class="o">=</span> <span class="nx">createCube</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">46</span><span class="cl">
</span></span><span class="line"><span class="ln">47</span><span class="cl">    <span class="c1">//
</span></span></span><span class="line"><span class="ln">48</span><span class="cl"><span class="c1"></span>    <span class="c1">// Create GUI for components that require it
</span></span></span><span class="line"><span class="ln">49</span><span class="cl"><span class="c1"></span>    <span class="c1">//
</span></span></span><span class="line"><span class="ln">50</span><span class="cl"><span class="c1"></span>    <span class="nx">createLoopGui</span><span class="p">(</span> <span class="nx">loop</span><span class="p">,</span> <span class="nx">gui</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">51</span><span class="cl">    <span class="nx">createCubeGui</span><span class="p">(</span> <span class="nx">gui</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">52</span><span class="cl">
</span></span><span class="line"><span class="ln">53</span><span class="cl">    <span class="c1">//
</span></span></span><span class="line"><span class="ln">54</span><span class="cl"><span class="c1"></span>    <span class="c1">// Add objects to the scene
</span></span></span><span class="line"><span class="ln">55</span><span class="cl"><span class="c1"></span>    <span class="c1">//
</span></span></span><span class="line"><span class="ln">56</span><span class="cl"><span class="c1"></span>    <span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">mainLight</span><span class="p">,</span> <span class="nx">ambientLight</span><span class="p">,</span> <span class="nx">cube</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">57</span><span class="cl">
</span></span><span class="line"><span class="ln">58</span><span class="cl">    <span class="c1">//
</span></span></span><span class="line"><span class="ln">59</span><span class="cl"><span class="c1"></span>    <span class="c1">// Add updatable objects to the loop
</span></span></span><span class="line"><span class="ln">60</span><span class="cl"><span class="c1"></span>    <span class="c1">//
</span></span></span><span class="line"><span class="ln">61</span><span class="cl"><span class="c1"></span>    <span class="nx">loop</span><span class="p">.</span><span class="nx">updatables</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">stats</span><span class="p">,</span> <span class="nx">cube</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">62</span><span class="cl">
</span></span><span class="line"><span class="ln">63</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">64</span><span class="cl">
</span></span><span class="line"><span class="ln">65</span><span class="cl">  <span class="cm">/** Performs any ansynchronous initiliazation needed by
</span></span></span><span class="line"><span class="ln">66</span><span class="cl"><span class="cm">   * a Three.js world
</span></span></span><span class="line"><span class="ln">67</span><span class="cl"><span class="cm">   */</span>
</span></span><span class="line"><span class="ln">68</span><span class="cl">  <span class="kr">async</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">69</span><span class="cl">
</span></span><span class="line"><span class="ln">70</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">71</span><span class="cl">
</span></span><span class="line"><span class="ln">72</span><span class="cl">  <span class="cm">/** Renders a single frame */</span>
</span></span><span class="line"><span class="ln">73</span><span class="cl">  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">74</span><span class="cl">
</span></span><span class="line"><span class="ln">75</span><span class="cl">    <span class="c1">// Draw a single frame
</span></span></span><span class="line"><span class="ln">76</span><span class="cl"><span class="c1"></span>    <span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span> <span class="nx">scene</span><span class="p">,</span> <span class="nx">camera</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">77</span><span class="cl">
</span></span><span class="line"><span class="ln">78</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">79</span><span class="cl">
</span></span><span class="line"><span class="ln">80</span><span class="cl">  <span class="cm">/** Starts an animation loop */</span>
</span></span><span class="line"><span class="ln">81</span><span class="cl">  <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">82</span><span class="cl">
</span></span><span class="line"><span class="ln">83</span><span class="cl">    <span class="nx">loop</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">84</span><span class="cl">
</span></span><span class="line"><span class="ln">85</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">86</span><span class="cl">
</span></span><span class="line"><span class="ln">87</span><span class="cl">  <span class="cm">/** Stops an animation loop */</span>
</span></span><span class="line"><span class="ln">88</span><span class="cl">  <span class="nx">stop</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">89</span><span class="cl">
</span></span><span class="line"><span class="ln">90</span><span class="cl">    <span class="nx">loop</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">91</span><span class="cl">
</span></span><span class="line"><span class="ln">92</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">93</span><span class="cl">
</span></span><span class="line"><span class="ln">94</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">95</span><span class="cl">
</span></span><span class="line"><span class="ln">96</span><span class="cl"><span class="kr">export</span> <span class="p">{</span> <span class="nx">World</span> <span class="p">};</span></span></span></code></pre></div>
<p>During construction, <code>World</code> calls imported functions to create the basic components of a 3D world: a scene, camera, lights, and a 3D spinning cube.</p>
<p><code>World</code> also calls imported functions to initialize renderer, statistics, GUI, animation loop, and responsive resizer systems.</p>
<p>References to these components and systems are stored as module-level variables, encapsulating them away from consumers of the <code>World</code> object and preventing the <code>World</code> object from becoming a catch-all global variable.  We’ll keep our components as loosely-coupled and coarsely-grained as is practical, and in this sense, the <code>World</code> object can be thought of as a somewhat rough-and-ready dependency-injection container.</p>
<p>Each of these components and systems either is an imported class or is constructed by an imported (and therefore encapsulated) factory function of the form <code>createObject(…)</code>, and each will be discussed separately in turn.  For more information, see <em>Discover Three.js</em> at Chapter 1.3, &ldquo;<a href="https://discoverthreejs.com/book/first-steps/world-app/" target="_blank" rel="noopener noreferrer">Introducing the World App<i class="fas fa-external-link-square-alt ms-1"></i></a>.&rdquo;</p>
<h2 id="systems" data-numberify>Systems<a class="anchor ms-1 d-none" href="#systems">#</a></h2>
<p>The elements described as “systems” and contained in that branch of the folder structure are ones that provide services to our app, such as the animation loop and GUI, that relate to aspects of the 3D world other than describing the pixels that need to be put on the screen.</p>
<h3 id="renderer" data-numberify>Renderer<a class="anchor ms-1 d-none" href="#renderer">#</a></h3>
<p>The <code>createRenderer()</code> function defined in <code>/src/world/systems/renderer.js</code> initializes a Three.js <a href="https://threejs.org/docs/index.html?q=webglre#api/en/renderers/WebGLRenderer" target="_blank" rel="noopener noreferrer"><code>WebGLRenderer</code><i class="fas fa-external-link-square-alt ms-1"></i></a>.  That renderer is set up to use antialiasing and physically-correct lighting.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">WebGLRenderer</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;three&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="cm">/** Initiliazes a Three.js WebGLRenderer
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="cm"> * @return {import(&#34;three&#34;).WebGLRenderer}
</span></span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="kd">function</span> <span class="nx">createRenderer</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">  <span class="kr">const</span> <span class="nx">renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebGLRenderer</span><span class="p">(</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="nx">antialias</span><span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">  <span class="p">}</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">
</span></span><span class="line"><span class="ln">12</span><span class="cl">  <span class="nx">renderer</span><span class="p">.</span><span class="nx">physicallyCorrectLights</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">
</span></span><span class="line"><span class="ln">14</span><span class="cl">  <span class="k">return</span> <span class="nx">renderer</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">
</span></span><span class="line"><span class="ln">16</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">
</span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="kr">export</span> <span class="p">{</span> <span class="nx">createRenderer</span> <span class="p">};</span></span></span></code></pre></div>
<p>For more information, see <em>Discover Three.js</em> at the section “<a href="https://discoverthreejs.com/book/first-steps/world-app/#systems-the-renderer-module" target="_blank" rel="noopener noreferrer">Systems: The Renderer Module<i class="fas fa-external-link-square-alt ms-1"></i></a>” in Chapter 1.3, “<a href="https://discoverthreejs.com/book/first-steps/world-app/" target="_blank" rel="noopener noreferrer">Introducing the World App<i class="fas fa-external-link-square-alt ms-1"></i></a>.”</p>
<h3 id="resizer" data-numberify>Resizer<a class="anchor ms-1 d-none" href="#resizer">#</a></h3>
<p>The <code>Resizer</code> class defined in <code>/src/world/systems/resizer.js</code> listens for changes to the window size and resizes the Three.js renderer and its canvas context as needed.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kr">const</span> <span class="nx">setSize</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">container</span><span class="p">,</span> <span class="nx">camera</span><span class="p">,</span> <span class="nx">renderer</span> <span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">  <span class="nx">camera</span><span class="p">.</span><span class="nx">aspect</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">    <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">clientWidth</span> <span class="o">/</span> <span class="nx">container</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">  <span class="nx">camera</span><span class="p">.</span><span class="nx">updateProjectionMatrix</span><span class="p">();</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">  <span class="nx">renderer</span><span class="p">.</span><span class="nx">setSize</span><span class="p">(</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">    <span class="nx">container</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="nx">container</span><span class="p">.</span><span class="nx">clientHeight</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">  <span class="nx">renderer</span><span class="p">.</span><span class="nx">setPixelRatio</span><span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">devicePixelRatio</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">
</span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">
</span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="kr">class</span> <span class="nx">Resizer</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">
</span></span><span class="line"><span class="ln">17</span><span class="cl">  <span class="nx">constructor</span><span class="p">(</span> <span class="nx">container</span><span class="p">,</span> <span class="nx">camera</span><span class="p">,</span> <span class="nx">renderer</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl">
</span></span><span class="line"><span class="ln">19</span><span class="cl">    <span class="c1">// Set initial size on load
</span></span></span><span class="line"><span class="ln">20</span><span class="cl"><span class="c1"></span>    <span class="nx">setSize</span><span class="p">(</span> <span class="nx">container</span><span class="p">,</span> <span class="nx">camera</span><span class="p">,</span> <span class="nx">renderer</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">21</span><span class="cl">
</span></span><span class="line"><span class="ln">22</span><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s2">&#34;resize&#34;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">
</span></span><span class="line"><span class="ln">24</span><span class="cl">      <span class="c1">// Set the size again if a resize occurs
</span></span></span><span class="line"><span class="ln">25</span><span class="cl"><span class="c1"></span>      <span class="nx">setSize</span><span class="p">(</span> <span class="nx">container</span><span class="p">,</span> <span class="nx">camera</span><span class="p">,</span> <span class="nx">renderer</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">26</span><span class="cl">      <span class="c1">// Perform any custom actions
</span></span></span><span class="line"><span class="ln">27</span><span class="cl"><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">onResize</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">28</span><span class="cl">
</span></span><span class="line"><span class="ln">29</span><span class="cl">    <span class="p">}</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">30</span><span class="cl">
</span></span><span class="line"><span class="ln">31</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">32</span><span class="cl">
</span></span><span class="line"><span class="ln">33</span><span class="cl">  <span class="nx">onResize</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="ln">34</span><span class="cl">
</span></span><span class="line"><span class="ln">35</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">36</span><span class="cl">
</span></span><span class="line"><span class="ln">37</span><span class="cl"><span class="kr">export</span> <span class="p">{</span> <span class="nx">Resizer</span> <span class="p">};</span></span></span></code></pre></div>
<p>For more information, see <em>Discover Three.js</em> at the section “<a href="https://discoverthreejs.com/book/first-steps/world-app/#systems-the-resizer-module" target="_blank" rel="noopener noreferrer">Systems: The Resizer Module<i class="fas fa-external-link-square-alt ms-1"></i></a>” in Chapter 1.3, “<a href="https://discoverthreejs.com/book/first-steps/world-app/" target="_blank" rel="noopener noreferrer">Introducing the World App<i class="fas fa-external-link-square-alt ms-1"></i></a>.”</p>
<h3 id="animation-loop" data-numberify>Animation Loop<a class="anchor ms-1 d-none" href="#animation-loop">#</a></h3>
<p>The <code>Loop</code> class defined in <code>/src/world/systems/loop.js</code> manages the animation loop, with the methods <code>start()</code>, <code>stop()</code>, and <code>tick()</code> being responsible for starting, stopping, and iterating the loop, respectively.</p>
<p>A <code>Loop</code> object maintains an array called <code>updatables</code>, which will be populated with objects that need to be updated each frame (for example, having their positions updated to simulate movement).  These objects must be either defined or <a href="https://www.audero.it/blog/2016/12/05/monkey-patching-javascript/" target="_blank" rel="noopener noreferrer">monkey-patched<i class="fas fa-external-link-square-alt ms-1"></i></a> with a <code>tick( delta )</code> method.  That takes as a parameter the time between the previous frame and the current one and performs any computations and mutations required to update the object.  This way, each object is kept responsible for its own per-frame updates, and the single-responsibility principle is respected.</p>
<p>Innovating on <em>Discover Three.js</em>’s approach, the <code>Loop</code> class that I present here descends from Three.js’s <a href="https://threejs.org/docs/index.html?q=eventdis#api/en/core/EventDispatcher" target="_blank" rel="noopener noreferrer"><code>EventDispatcher</code><i class="fas fa-external-link-square-alt ms-1"></i></a> class.  That provides an <code>addEventHandler(…)</code> facility that allows <code>Loop</code> objects to raise <code>start</code> and <code>stop</code> events that support management through the GUI.  To that end, <code>loop.js</code> defines and exports a <code>createLoopGui(…)</code> function that creates GUI controls for <em>Play</em> and <em>Pause</em> buttons, wires them to the <code>Loop</code> object’s <code>start()</code> and <code>stop()</code> buttons, and listens for the object’s <code>start</code> and <code>stop</code> events.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln">  1</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Clock</span><span class="p">,</span> <span class="nx">EventDispatcher</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;three&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">  2</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">gui</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;./gui.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">  3</span><span class="cl">
</span></span><span class="line"><span class="ln">  4</span><span class="cl"><span class="kr">const</span> <span class="nx">clock</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Clock</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">  5</span><span class="cl"><span class="kd">let</span> <span class="nx">startButton</span><span class="p">,</span> <span class="nx">stopButton</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">  6</span><span class="cl">
</span></span><span class="line"><span class="ln">  7</span><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="ln">  8</span><span class="cl"><span class="cm"> * Creates GUI for the animation loop
</span></span></span><span class="line"><span class="ln">  9</span><span class="cl"><span class="cm"> * @param {Loop} loop
</span></span></span><span class="line"><span class="ln"> 10</span><span class="cl"><span class="cm"> * @param {import(&#34;https://unpkg.com/three@0.143.0/examples/jsm/libs/lil-gui.module.min.js&#34;).GUI} gui
</span></span></span><span class="line"><span class="ln"> 11</span><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="ln"> 12</span><span class="cl"><span class="kd">function</span> <span class="nx">createLoopGui</span><span class="p">(</span> <span class="nx">loop</span><span class="p">,</span> <span class="nx">gui</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 13</span><span class="cl">
</span></span><span class="line"><span class="ln"> 14</span><span class="cl">  <span class="kr">const</span> <span class="nx">loopFolder</span> <span class="o">=</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">addFolder</span><span class="p">(</span> <span class="s2">&#34;Animation loop&#34;</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 15</span><span class="cl">  <span class="nx">startButton</span> <span class="o">=</span> <span class="nx">loopFolder</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">loop</span><span class="p">,</span> <span class="s2">&#34;start&#34;</span> <span class="p">)</span>
</span></span><span class="line"><span class="ln"> 16</span><span class="cl">    <span class="p">.</span><span class="nx">name</span><span class="p">(</span> <span class="s2">&#34;&amp;#x23f5;&amp;#xfe0e;&amp;ensp;Play&#34;</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 17</span><span class="cl">  <span class="k">if</span> <span class="p">(</span> <span class="nx">loop</span><span class="p">.</span><span class="nx">isRunning</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 18</span><span class="cl">
</span></span><span class="line"><span class="ln"> 19</span><span class="cl">    <span class="nx">startButton</span><span class="p">.</span><span class="nx">disable</span><span class="p">();</span>
</span></span><span class="line"><span class="ln"> 20</span><span class="cl">
</span></span><span class="line"><span class="ln"> 21</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 22</span><span class="cl">
</span></span><span class="line"><span class="ln"> 23</span><span class="cl">  <span class="nx">stopButton</span> <span class="o">=</span> <span class="nx">loopFolder</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">loop</span><span class="p">,</span> <span class="s2">&#34;stop&#34;</span> <span class="p">)</span>
</span></span><span class="line"><span class="ln"> 24</span><span class="cl">    <span class="p">.</span><span class="nx">name</span><span class="p">(</span> <span class="s2">&#34;&amp;#x23f8;&amp;#xfe0e;&amp;ensp;Pause&#34;</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 25</span><span class="cl">  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">loop</span><span class="p">.</span><span class="nx">isRunning</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 26</span><span class="cl">
</span></span><span class="line"><span class="ln"> 27</span><span class="cl">    <span class="nx">stopButton</span><span class="p">.</span><span class="nx">disable</span><span class="p">();</span>
</span></span><span class="line"><span class="ln"> 28</span><span class="cl">
</span></span><span class="line"><span class="ln"> 29</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 30</span><span class="cl">
</span></span><span class="line"><span class="ln"> 31</span><span class="cl">  <span class="nx">loop</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s2">&#34;start&#34;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 32</span><span class="cl">
</span></span><span class="line"><span class="ln"> 33</span><span class="cl">    <span class="nx">startButton</span><span class="p">.</span><span class="nx">disable</span><span class="p">();</span>
</span></span><span class="line"><span class="ln"> 34</span><span class="cl">    <span class="nx">stopButton</span><span class="p">.</span><span class="nx">enable</span><span class="p">();</span>
</span></span><span class="line"><span class="ln"> 35</span><span class="cl">
</span></span><span class="line"><span class="ln"> 36</span><span class="cl">  <span class="p">}</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 37</span><span class="cl">
</span></span><span class="line"><span class="ln"> 38</span><span class="cl">  <span class="nx">loop</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s2">&#34;stop&#34;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 39</span><span class="cl">
</span></span><span class="line"><span class="ln"> 40</span><span class="cl">    <span class="nx">startButton</span><span class="p">.</span><span class="nx">enable</span><span class="p">();</span>
</span></span><span class="line"><span class="ln"> 41</span><span class="cl">    <span class="nx">stopButton</span><span class="p">.</span><span class="nx">disable</span><span class="p">();</span>
</span></span><span class="line"><span class="ln"> 42</span><span class="cl">
</span></span><span class="line"><span class="ln"> 43</span><span class="cl">  <span class="p">}</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 44</span><span class="cl">
</span></span><span class="line"><span class="ln"> 45</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln"> 46</span><span class="cl">
</span></span><span class="line"><span class="ln"> 47</span><span class="cl"><span class="cm">/** Encapsulates the animation loop for a Three.js world */</span>
</span></span><span class="line"><span class="ln"> 48</span><span class="cl"><span class="kr">class</span> <span class="nx">Loop</span> <span class="kr">extends</span> <span class="nx">EventDispatcher</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 49</span><span class="cl">
</span></span><span class="line"><span class="ln"> 50</span><span class="cl">  <span class="nx">constructor</span><span class="p">(</span> <span class="nx">camera</span><span class="p">,</span> <span class="nx">scene</span><span class="p">,</span> <span class="nx">renderer</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 51</span><span class="cl">
</span></span><span class="line"><span class="ln"> 52</span><span class="cl">    <span class="kr">super</span><span class="p">();</span>
</span></span><span class="line"><span class="ln"> 53</span><span class="cl">
</span></span><span class="line"><span class="ln"> 54</span><span class="cl">    <span class="cm">/** @type {import(&#34;three&#34;).PerspectiveCamera} */</span>
</span></span><span class="line"><span class="ln"> 55</span><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">camera</span> <span class="o">=</span> <span class="nx">camera</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 56</span><span class="cl">    <span class="cm">/** @type {import(&#34;three&#34;).Scene} */</span>
</span></span><span class="line"><span class="ln"> 57</span><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">scene</span> <span class="o">=</span> <span class="nx">scene</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 58</span><span class="cl">    <span class="cm">/** @type {import(&#34;three&#34;).WebGLRenderer} */</span>
</span></span><span class="line"><span class="ln"> 59</span><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span> <span class="o">=</span> <span class="nx">renderer</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 60</span><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">updatables</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="ln"> 61</span><span class="cl">    <span class="cm">/** @type {boolean} */</span>
</span></span><span class="line"><span class="ln"> 62</span><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">_isRunning</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 63</span><span class="cl">
</span></span><span class="line"><span class="ln"> 64</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 65</span><span class="cl">
</span></span><span class="line"><span class="ln"> 66</span><span class="cl">  <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 67</span><span class="cl">
</span></span><span class="line"><span class="ln"> 68</span><span class="cl">    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">this</span><span class="p">.</span><span class="nx">isRunning</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 69</span><span class="cl">
</span></span><span class="line"><span class="ln"> 70</span><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">setAnimationLoop</span><span class="p">(</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 71</span><span class="cl">
</span></span><span class="line"><span class="ln"> 72</span><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">tick</span><span class="p">();</span>
</span></span><span class="line"><span class="ln"> 73</span><span class="cl">
</span></span><span class="line"><span class="ln"> 74</span><span class="cl">        <span class="c1">// Render a frame
</span></span></span><span class="line"><span class="ln"> 75</span><span class="cl"><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">scene</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">camera</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 76</span><span class="cl">
</span></span><span class="line"><span class="ln"> 77</span><span class="cl">      <span class="p">}</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 78</span><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">_isRunning</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 79</span><span class="cl">
</span></span><span class="line"><span class="ln"> 80</span><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span> <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;start&#34;</span><span class="p">,</span> <span class="nx">message</span><span class="o">:</span> <span class="s2">&#34;&#34;</span> <span class="p">}</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 81</span><span class="cl">
</span></span><span class="line"><span class="ln"> 82</span><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 83</span><span class="cl">
</span></span><span class="line"><span class="ln"> 84</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 85</span><span class="cl">
</span></span><span class="line"><span class="ln"> 86</span><span class="cl">  <span class="nx">stop</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 87</span><span class="cl">
</span></span><span class="line"><span class="ln"> 88</span><span class="cl">    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">isRunning</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 89</span><span class="cl">
</span></span><span class="line"><span class="ln"> 90</span><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">setAnimationLoop</span><span class="p">(</span> <span class="kc">null</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 91</span><span class="cl">
</span></span><span class="line"><span class="ln"> 92</span><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">_isRunning</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 93</span><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span> <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;stop&#34;</span><span class="p">,</span> <span class="nx">message</span><span class="o">:</span> <span class="s2">&#34;&#34;</span> <span class="p">}</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 94</span><span class="cl">
</span></span><span class="line"><span class="ln"> 95</span><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 96</span><span class="cl">
</span></span><span class="line"><span class="ln"> 97</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 98</span><span class="cl">
</span></span><span class="line"><span class="ln"> 99</span><span class="cl">  <span class="nx">tick</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">100</span><span class="cl">
</span></span><span class="line"><span class="ln">101</span><span class="cl">    <span class="kr">const</span> <span class="nx">delta</span> <span class="o">=</span> <span class="nx">clock</span><span class="p">.</span><span class="nx">getDelta</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">102</span><span class="cl">
</span></span><span class="line"><span class="ln">103</span><span class="cl">    <span class="k">for</span> <span class="p">(</span> <span class="kr">const</span> <span class="nx">object</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">updatables</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">104</span><span class="cl">
</span></span><span class="line"><span class="ln">105</span><span class="cl">      <span class="nx">object</span><span class="p">.</span><span class="nx">tick</span><span class="p">(</span> <span class="nx">delta</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">106</span><span class="cl">
</span></span><span class="line"><span class="ln">107</span><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="ln">108</span><span class="cl">
</span></span><span class="line"><span class="ln">109</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">110</span><span class="cl">
</span></span><span class="line"><span class="ln">111</span><span class="cl">  <span class="nx">get</span> <span class="nx">isRunning</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">112</span><span class="cl">
</span></span><span class="line"><span class="ln">113</span><span class="cl">    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_isRunning</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">114</span><span class="cl">
</span></span><span class="line"><span class="ln">115</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">116</span><span class="cl">
</span></span><span class="line"><span class="ln">117</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">118</span><span class="cl">
</span></span><span class="line"><span class="ln">119</span><span class="cl"><span class="kr">export</span> <span class="p">{</span> <span class="nx">Loop</span><span class="p">,</span> <span class="nx">createLoopGui</span> <span class="p">};</span></span></span></code></pre></div>
<p>For more information, see <em>Discover Three.js</em> at Chapter 1.3, “<a href="https://discoverthreejs.com/book/first-steps/animation-loop/" target="_blank" rel="noopener noreferrer">The Animation Loop<i class="fas fa-external-link-square-alt ms-1"></i></a>.”</p>
<h3 id="performance-counter" data-numberify>Performance Counter<a class="anchor ms-1 d-none" href="#performance-counter">#</a></h3>
<p>The <code>createStats()</code> method defined in <code>/src/world/systems/stats.js</code> creates a <code>Stats</code> object for viewing our app’s frame-per-second throughput.  This object is monkey-patched with a <code>tick(…)</code> method to allow the <code>Stats</code> object to be updated each frame by participating in the <code>Loop</code> object’s <code>updatables</code> array.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kr">import</span> <span class="nx">Stats</span> <span class="nx">from</span> <span class="s2">&#34;https://unpkg.com/three@0.143.0/examples/jsm/libs/stats.module.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="cm"> * Creates a stats module for a Three.js world
</span></span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="cm"> * @return {Stats} A stats object
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="kd">function</span> <span class="nx">createStats</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">  <span class="kr">const</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Stats</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">  <span class="c1">// Monkey-patch a tick method onto stats to support its
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="c1"></span>  <span class="c1">// use in loop.updatables
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="c1"></span>  <span class="nx">stats</span><span class="p">.</span><span class="nx">tick</span> <span class="o">=</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">update</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">
</span></span><span class="line"><span class="ln">14</span><span class="cl">  <span class="k">return</span> <span class="nx">stats</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">
</span></span><span class="line"><span class="ln">16</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">
</span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="kr">export</span> <span class="p">{</span> <span class="nx">createStats</span> <span class="p">};</span></span></span></code></pre></div>
<h3 id="graphical-user-interface" data-numberify>Graphical User Interface<a class="anchor ms-1 d-none" href="#graphical-user-interface">#</a></h3>
<p>Frequently, we will want to be able to try out different parameter values in our Three.js apps without having to modify the code and reload the app.  To that end, the <code>createGui()</code> function defined in <code>/src/world/systems/gui.js</code> creates a basic GUI.  Initially, that GUI contains only a button to reset default values; it falls upon other components to provide their own specific GUI controls as needed, as we saw with the <code>Loop</code> class.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">GUI</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;https://unpkg.com/three@0.143.0/examples/jsm/libs/lil-gui.module.min.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="cm">/** @type {import(&#34;https://unpkg.com/three@0.143.0/examples/jsm/libs/lil-gui.module.min.js&#34;).GUI} */</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="kd">function</span> <span class="nx">createGui</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">  <span class="kr">const</span> <span class="nx">gui</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GUI</span><span class="p">();</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">  <span class="kr">const</span> <span class="nx">resetButton</span> <span class="o">=</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">gui</span><span class="p">,</span> <span class="s2">&#34;reset&#34;</span> <span class="p">).</span><span class="nx">name</span><span class="p">(</span> <span class="s2">&#34;&amp;#x1f5d8;&amp;ensp;Reset values&#34;</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">
</span></span><span class="line"><span class="ln">10</span><span class="cl">  <span class="k">return</span> <span class="nx">gui</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">
</span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">
</span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="kr">export</span> <span class="p">{</span> <span class="nx">createGui</span> <span class="p">};</span></span></span></code></pre></div>
<h2 id="components" data-numberify>Components<a class="anchor ms-1 d-none" href="#components">#</a></h2>
<p>The elements described as “components” and contained in that branch of the folder structure are the ones that directly affect the objects in the 3D world: the lights, camera, any rendered objects, and the scene that composites them.</p>
<h3 id="scene" data-numberify>Scene<a class="anchor ms-1 d-none" href="#scene">#</a></h3>
<p>The <code>createScene()</code> function defined in <code>src/world/components/scene.js</code> constructs a Three.js <a href="https://threejs.org/docs/index.html?q=scene#api/en/scenes/Scene" target="_blank" rel="noopener noreferrer"><code>Scene</code><i class="fas fa-external-link-square-alt ms-1"></i></a> object.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Color</span><span class="p">,</span> <span class="nx">Scene</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;three&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="cm">/** Initializes a Three.js Scene 
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="cm"> * @return {import(&#34;three&#34;).Scene}
</span></span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="kd">function</span> <span class="nx">createScene</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">  <span class="kr">const</span> <span class="nx">scene</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Scene</span><span class="p">();</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">
</span></span><span class="line"><span class="ln">10</span><span class="cl">  <span class="nx">scene</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Color</span><span class="p">(</span> <span class="mh">0x191970</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">
</span></span><span class="line"><span class="ln">12</span><span class="cl">  <span class="k">return</span> <span class="nx">scene</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">
</span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">
</span></span><span class="line"><span class="ln">16</span><span class="cl"><span class="kr">export</span> <span class="p">{</span> <span class="nx">createScene</span> <span class="p">};</span></span></span></code></pre></div>
<h3 id="lights" data-numberify>Lights<a class="anchor ms-1 d-none" href="#lights">#</a></h3>
<p>The <code>createLights()</code> function defined in <code>/src/world/components/lights.js</code> creates a directional key light and an ambient hemisphere light.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kr">import</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">  <span class="nx">DirectionalLight</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">  <span class="nx">HemisphereLight</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;three&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="cm">/** Initializes a directional key light and an ambient
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="cm"> * hemisphere light for a Three.js world
</span></span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="cm"> * @return {Array&lt;import(&#34;three&#34;).Light&gt;}
</span></span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="kd">function</span> <span class="nx">createLights</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">
</span></span><span class="line"><span class="ln">11</span><span class="cl">  <span class="c1">// Create a directional light
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">mainLight</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DirectionalLight</span><span class="p">(</span> <span class="s2">&#34;white&#34;</span><span class="p">,</span> <span class="mi">8</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">
</span></span><span class="line"><span class="ln">14</span><span class="cl">  <span class="c1">// Move the light right, up, and towards the camera
</span></span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="c1"></span>  <span class="nx">mainLight</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">
</span></span><span class="line"><span class="ln">17</span><span class="cl">  <span class="c1">// Create ambient lighting
</span></span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">ambientLight</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HemisphereLight</span><span class="p">(</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">    <span class="s2">&#34;white&#34;</span><span class="p">,</span> <span class="c1">// bright sky color
</span></span></span><span class="line"><span class="ln">20</span><span class="cl"><span class="c1"></span>    <span class="s2">&#34;darkslategray&#34;</span><span class="p">,</span> <span class="c1">// dim ground color
</span></span></span><span class="line"><span class="ln">21</span><span class="cl"><span class="c1"></span>    <span class="mi">5</span> <span class="c1">// intensity
</span></span></span><span class="line"><span class="ln">22</span><span class="cl"><span class="c1"></span>  <span class="p">);</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">
</span></span><span class="line"><span class="ln">24</span><span class="cl">  <span class="k">return</span> <span class="p">[</span> <span class="nx">mainLight</span><span class="p">,</span> <span class="nx">ambientLight</span> <span class="p">];</span>
</span></span><span class="line"><span class="ln">25</span><span class="cl">
</span></span><span class="line"><span class="ln">26</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">27</span><span class="cl">
</span></span><span class="line"><span class="ln">28</span><span class="cl"><span class="kr">export</span> <span class="p">{</span> <span class="nx">createLights</span> <span class="p">};</span></span></span></code></pre></div>
<h3 id="camera" data-numberify>Camera<a class="anchor ms-1 d-none" href="#camera">#</a></h3>
<p>The <code>createCamera</code> function defined in <code>/src/world/components/camera.js</code> creates a Three.js <a href="https://threejs.org/docs/index.html?q=persp#api/en/cameras/PerspectiveCamera" target="_blank" rel="noopener noreferrer"><code>PerspectiveCamera</code><i class="fas fa-external-link-square-alt ms-1"></i></a> and gives it a position along the <em>z</em> axis at some distance from the world origin.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">PerspectiveCamera</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;three&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="kd">function</span> <span class="nx">createCamera</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">  <span class="kr">const</span> <span class="nx">camera</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PerspectiveCamera</span><span class="p">(</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">    <span class="mi">70</span><span class="p">,</span> <span class="c1">// fov = Field Of View
</span></span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="c1"></span>    <span class="mi">1</span><span class="p">,</span> <span class="c1">// aspect ratio (dummy value)
</span></span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="c1"></span>    <span class="mf">0.1</span><span class="p">,</span> <span class="c1">// near clipping plane
</span></span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="c1"></span>    <span class="mi">250</span><span class="p">,</span> <span class="c1">// far clipping plane
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c1"></span>  <span class="p">);</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">
</span></span><span class="line"><span class="ln">12</span><span class="cl">  <span class="c1">// move the camera back so we can view the scene
</span></span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="c1"></span>  <span class="nx">camera</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">
</span></span><span class="line"><span class="ln">15</span><span class="cl">  <span class="k">return</span> <span class="nx">camera</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">
</span></span><span class="line"><span class="ln">17</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl">
</span></span><span class="line"><span class="ln">19</span><span class="cl"><span class="kr">export</span> <span class="p">{</span> <span class="nx">createCamera</span> <span class="p">};</span></span></span></code></pre></div>
<h3 id="cube" data-numberify>Cube<a class="anchor ms-1 d-none" href="#cube">#</a></h3>
<p>The <code>createCube</code> function defined in <code>/src/world/components/cube.js</code> creates a green cube (the 3D equivalent of a “Hello, world” program).  The cube itself is a Three.js <a href="https://threejs.org/docs/index.html?q=mesh#api/en/objects/Mesh" target="_blank" rel="noopener noreferrer"><code>Mesh</code><i class="fas fa-external-link-square-alt ms-1"></i></a> created from a <a href="https://github.com/mrdoob/three.js/blob/dev/examples/jsm/geometries/RoundedBoxGeometry.js" target="_blank" rel="noopener noreferrer"><code>RoundedBoxGeometry</code><i class="fas fa-external-link-square-alt ms-1"></i></a> and a <a href="https://threejs.org/docs/index.html?q=mesh#api/en/materials/MeshStandardMaterial" target="_blank" rel="noopener noreferrer"><code>MeshStandardMaterial</code><i class="fas fa-external-link-square-alt ms-1"></i></a>.  That mesh is monkey-patched with a <code>tick(…)</code> method so that the mesh can be animated by participating in the <code>Loop</code> object’s <code>updatables</code> array.</p>
<p><code>cube.js</code> also defines a <code>createCubeGui(…)</code> function that provides a GUI control to control the speed at which the cube rotates, specified in degrees rotation per second.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Mesh</span><span class="p">,</span> <span class="nx">MeshStandardMaterial</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;three&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">RoundedBoxGeometry</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;https://unpkg.com/three@0.143.0/examples/jsm/geometries/RoundedBoxGeometry.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">params</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;../params.js&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="kd">function</span> <span class="nx">createCubeGui</span><span class="p">(</span> <span class="nx">gui</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">  <span class="kr">const</span> <span class="nx">cubeFolder</span> <span class="o">=</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">addFolder</span><span class="p">(</span> <span class="s2">&#34;Spinning cube&#34;</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">  <span class="nx">cubeFolder</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">params</span><span class="p">.</span><span class="nx">cube</span><span class="p">,</span> <span class="s2">&#34;degreesPerSecond&#34;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">1</span> <span class="p">)</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="p">.</span><span class="nx">name</span><span class="p">(</span> <span class="s2">&#34;Degrees per second&#34;</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">
</span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">
</span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="cm">/** Creates a rounded cube and animates its rotation */</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="kd">function</span> <span class="nx">createCube</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">
</span></span><span class="line"><span class="ln">16</span><span class="cl">  <span class="kr">const</span> <span class="nx">geometry</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RoundedBoxGeometry</span><span class="p">(</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">0.1</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">  <span class="kr">const</span> <span class="nx">material</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MeshStandardMaterial</span><span class="p">(</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">      <span class="nx">color</span><span class="o">:</span> <span class="s2">&#34;green&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">      <span class="nx">metalness</span><span class="o">:</span> <span class="mf">1.0</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">21</span><span class="cl">      <span class="nx">roughness</span><span class="o">:</span> <span class="mf">0.5</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl">    <span class="p">}</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">  <span class="kr">const</span> <span class="nx">cube</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Mesh</span><span class="p">(</span> <span class="nx">geometry</span><span class="p">,</span> <span class="nx">material</span> <span class="p">);</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl">
</span></span><span class="line"><span class="ln">25</span><span class="cl">  <span class="nx">cube</span><span class="p">.</span><span class="nx">tick</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">delta</span> <span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">26</span><span class="cl">
</span></span><span class="line"><span class="ln">27</span><span class="cl">    <span class="nx">cube</span><span class="p">.</span><span class="nx">rotation</span><span class="p">.</span><span class="nx">z</span> <span class="o">+=</span> <span class="nx">delta</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">params</span><span class="p">.</span><span class="nx">cube</span><span class="p">.</span><span class="nx">degreesPerSecond</span> <span class="o">/</span> <span class="mf">180.</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">28</span><span class="cl">    <span class="nx">cube</span><span class="p">.</span><span class="nx">rotation</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">delta</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">params</span><span class="p">.</span><span class="nx">cube</span><span class="p">.</span><span class="nx">degreesPerSecond</span> <span class="o">/</span> <span class="mf">180.</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">29</span><span class="cl">    <span class="nx">cube</span><span class="p">.</span><span class="nx">rotation</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">delta</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">params</span><span class="p">.</span><span class="nx">cube</span><span class="p">.</span><span class="nx">degreesPerSecond</span> <span class="o">/</span> <span class="mf">180.</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">30</span><span class="cl">
</span></span><span class="line"><span class="ln">31</span><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="ln">32</span><span class="cl">
</span></span><span class="line"><span class="ln">33</span><span class="cl">  <span class="k">return</span> <span class="nx">cube</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">34</span><span class="cl">
</span></span><span class="line"><span class="ln">35</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">36</span><span class="cl">
</span></span><span class="line"><span class="ln">37</span><span class="cl"><span class="kr">export</span> <span class="p">{</span> <span class="nx">createCube</span><span class="p">,</span> <span class="nx">createCubeGui</span> <span class="p">};</span></span></span></code></pre></div>
<h2 id="conclusion" data-numberify>Conclusion<a class="anchor ms-1 d-none" href="#conclusion">#</a></h2>
<p>With this framework in place, we have a ready-made template from which we can bootstrap diverse future Three.js projects.</p></div><div class="modal fade" id="rewardModal" tabindex="-1" aria-labelledby="rewardModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content surface">
      <div class="modal-header">
        <h5 class="modal-title text-surface" id="rewardModalLabel"><i class="fas fa-fw fa-coffee me-1"></i>Buy me a coffee</h5>
        <a href="#" data-bs-dismiss="modal" class="btn-close" aria-label="Close"></a>
      </div>
      <div class="modal-body">
        <ul class="nav nav-tabs mb-3" role="tablist"><li class="nav-item text-nowrap" role="presentation">
            <a class="nav-link active" id="reward-patreon-tab" data-bs-toggle="tab" href="#reward-patreon" role="tab" aria-controls="reward-patreon" aria-selected="true">
              <i class="fab fa-fw fa-patreon me-1"></i>Patreon
            </a>
          </li><li class="nav-item text-nowrap" role="presentation">
            <a class="nav-link" id="reward-paypal-tab" data-bs-toggle="tab" href="#reward-paypal" role="tab" aria-controls="reward-paypal" aria-selected="true">
              <i class="fab fa-fw fa-paypal me-1"></i>Paypal
            </a>
          </li></ul>
        <div class="tab-content" id="rewardTabContent"><div class="tab-pane fade post-reward-content text-center show active" id="reward-patreon" role="tabpanel" aria-labelledby="reward-patreon-tab">
            <img class="img-fluid post-reward-img" src="https://pnichols04.github.io/images/reward/patreon.png" loading="lazy" data-viewer-invisible />
          </div><div class="tab-pane fade post-reward-content text-center show" id="reward-paypal" role="tabpanel" aria-labelledby="reward-paypal-tab">
            <img class="img-fluid post-reward-img" src="https://pnichols04.github.io/images/reward/paypal.png" loading="lazy" data-viewer-invisible />
          </div></div>
      </div>
    </div>
  </div>
</div></div></article><div class="post-copyright mb-3 row card component" id="post-copyright">
    <div class="card-header">
        <h2 class="card-title fs-4 my-2 text-surface">Copyright</h2>
    </div>
    <div class="card-body"><a class="d-flex align-items-center flex-column" target="_blank" rel="license noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.en">
  <span><i class="fab fa-fw fa-2x fa-creative-commons"></i><i class="fab fa-fw fa-2x fa-creative-commons-by"></i><i class="fab fa-fw fa-2x fa-creative-commons-nc"></i><i class="fab fa-fw fa-2x fa-creative-commons-nd"></i></span>
  CC BY-NC-ND 4.0 
</a>


    </div>
</div><div class="card component row post-comments" id="post-comments">
  <div class="card-header">
    <h2 class="card-title my-2 fs-4 text-surface">Comments</h2>
  </div>
  <div class="card-body"><script src="https://utteranc.es/client.js"
  repo="pnichols04/pnichols04.github.io"
  issue-term="pathname"
  label="comment"
  theme="github-light"
  crossorigin="anonymous"
  async>
</script>
</div>
</div></div>
</div>

      </div>
    </main><footer class="footer mt-auto py-3 text-center container"><div class="offcanvas offcanvas-bottom h-auto" tabindex="-1" id="offcanvasActionsPanel"
  aria-labelledby="offcanvasActionsPanelLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title fs-4" id="offcanvasActionsPanelLabel">
      <i class="fas fa-fw fa-th-large me-1"></i>
      Actions
    </h5>
    <button type="button" class="btn-close ms-auto" data-bs-dismiss="offcanvas" data-bs-target="offcanvasActionsPanel" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body mt-2"><div class="social-share mb-4 d-flex overflow-auto">
      <a class="btn-social-share d-flex flex-column align-items-center me-3" rel="noopener noreferrer" aria-label="Twitter Share Button"
      target="_blank" href="https://twitter.com/intent/tweet?title=A%20Three.js%20Starter%20Template&url=https%3a%2f%2fpnichols04.github.io%2fblog%2fa-three-js-starter-template%2f">
        <i class="fab fa-2x fa-fw fa-twitter mb-2"></i> Twitter
      </a>
      <a class="btn-social-share d-flex flex-column align-items-center me-3" rel="noopener noreferrer" aria-label="Facebook Share Button"
        target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fpnichols04.github.io%2fblog%2fa-three-js-starter-template%2f">
        <i class="fab fa-2x fa-fw fa-facebook-f mb-2"></i> Facebook
      </a>
    </div>
    <hr class="mb-4"><div class="actions d-flex overflow-auto align-items-center">
      <a role="button" class="action action-go-back d-flex flex-column align-items-center me-3" href="javascript: window.history.back();">
        <span class="action-icon mb-2"><i class="fas fa-2x fa-chevron-circle-down" data-fa-transform="rotate-90"></i></span> Go back
      </a>
      <a role="button" class="action action-reload-page d-flex flex-column align-items-center me-3">
        <span class="action-icon mb-2"><i class="fas fa-2x fa-redo-alt"></i></span> Reload
      </a>
      <a role="button" class="action action-copy-url d-flex flex-column align-items-center me-3">
        <span class="action-icon mb-2"><i class="fas fa-2x fa-link"></i></span> Copy URL
      </a>
    </div>
  </div>
</div>
<nav class="social-links nav justify-content-center mb-2">
    <a class="nav-link social-link" href="mailto:philip.j.nichols@gmail.com" title="Email">
      <i class="fas fa-fw fa-2x fa-envelope"></i>
    </a>
      <a class="nav-link social-link" target="_blank" href="https://facebook.com/nicholsphilip" title="Facebook" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-facebook-f"></i>
      </a>
      <a class="nav-link social-link" target="_blank" href="https://github.com/pnichols04" title="GitHub" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-github"></i>
      </a>
      <a class="nav-link social-link" target="_blank" href="https://linkedin.com/in/nicholsphilip" title="LinkedIn" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-linkedin-in"></i>
      </a>
      <a class="nav-link social-link" target="_blank" href="https://www.patreon.com/nicholsphilip" title="Patreon" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-patreon"></i>
      </a>
      <a class="nav-link social-link" target="_blank" href="https://www.paypal.com/paypalme/philipnichols1856" title="Paypal" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-paypal"></i>
      </a>
      <a class="nav-link social-link" target="_blank" href="https://stackoverflow.com/users/1170146" title="Stack Overflow" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-stack-overflow"></i>
      </a>
      <a class="nav-link social-link" target="_blank" href="https://twitter.com/PhilipNichols04" title="Twitter" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-twitter"></i>
      </a>
  <a class="nav-link social-link" target="_blank" href="https://pnichols04.github.io/index.xml" title="RSS" rel="noopener noreferrer">
    <i class="fas fa-fw fa-2x fa-rss"></i>
  </a>
</nav>
<div class="copyright mb-2">
  Copyright © 2022 Philip Nichols. Source code published under MIT License.  All other content CC-BY-NC-ND 4.0.
</div>
</footer>
<script data-precache src="https://pnichols04.github.io/assets/main/bundle.min.8ca673cd2e40c0359b4f56200cfbbc3628cf855068ba13f008cf371968f0e2ff.js" integrity="sha256-jKZzzS5AwDWbT1YgDPu8NijPhVBouhPwCM83GWjw4v8=" crossorigin="anonymous" defer></script><script data-precache src="https://pnichols04.github.io/assets/icons/bundle.min.facab9b23a0fe2ea82360abd2345ff99734017e8f6a9878766019f06a35200f8.js" integrity="sha256-&#43;sq5sjoP4uqCNgq9I0X/mXNAF&#43;j2qYeHZgGfBqNSAPg=" crossorigin="anonymous" defer></script>
<script data-precache src="https://pnichols04.github.io/assets/viewer/bundle.min.9f713149f059d05fcb65e7f7c27308e61c384500e80ab1c333c2510a36a5d70c.js" integrity="sha256-n3ExSfBZ0F/LZef3wnMI5hw4RQDoCrHDM8JRCjal1ww=" crossorigin="anonymous" defer></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CYB4146TKL"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-CYB4146TKL', { 'anonymize_ip': false });
}
</script>
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('https:\/\/pnichols04.github.io\/service-worker.min.js').then(function(reg) {
      console.log('Successfully registered service worker', reg);
    }).catch(function(err) {
      console.warn('Error whilst registering service worker', err);
    });
  });
}
</script>
  </body>
</html>
